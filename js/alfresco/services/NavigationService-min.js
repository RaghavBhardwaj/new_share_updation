define(["dojo/_base/declare","alfresco/core/Core","alfresco/services/_NavigationServiceTopicMixin","dojo/hash","dojo/_base/array","dojo/_base/lang","service/constants/Default"],function(f,c,j,e,i,b,d){return f([c,j],{subscriptions:null,constructor:function g(l){b.mixin(this,l);this.alfSubscribe(this.navigateToPageTopic,b.hitch(this,"navigateToPage"));this.alfSubscribe(this.reloadPageTopic,b.hitch(this,"reloadPage"));if(this.subscriptions!=null){i.forEach(this.subscriptions,b.hitch(this,"setupNavigationSubscriptions"))}},setupNavigationSubscriptions:function a(m,l){if(m!=null&&m.topic!=null&&m.url!=null){this.alfSubscribe(m.topic,b.hitch(this,"navigateToPage",m))}else{this.alfLog("warn","A NavigationService subscription was requested, but the subscription was missing one of the required attributes of 'topic' or 'url'",m,this)}},navigateToPage:function k(m){if(!m.type==this.hashPath&&(typeof m.url=="undefined"||m.url==null||m.url=="")){this.alfLog("error","A page navigation request was made without a target URL defined as a 'url' attribute",m)}else{this.alfLog("log","Page navigation request received:",m);var l;if(typeof m.type=="undefined"||m.type==null||m.type==""||m.type==this.sharePageRelativePath){l=d.URL_PAGECONTEXT+m.url}else{if(m.type==this.contextRelativePath){l=Alfresco.contants.URL_CONTEXT+m.url}else{if(m.type==this.fullPath){l=m.url}}}if(m.type==this.hashPath){e(m.url)}else{if(typeof m.target=="undefined"||m.target==null||m.target==""||m.target==this.currentTarget){window.location=l}else{if(m.target==this.newTarget){window.open(l)}}}}},reloadPage:function h(l){this.alfLog("log","Page reload request received:",l);window.location.reload(true)}})});