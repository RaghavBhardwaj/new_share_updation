define(["dojo/_base/declare","alfresco/core/Core","alfresco/core/ObjectProcessingMixin","dojo/_base/lang","alfresco/core/ObjectTypeUtils"],function(d,f,c,g,b){return d([c],{generatePayload:function a(l,j,i,k,n,h){var m=null;if(k==null||k=="CONFIGURED"){m=l}else{if(k=="CURRENT_ITEM"){m=j}else{if(k=="PROCESS"){m=g.clone(l);this.processObject(h,m)}else{if(k=="BUILD"){m=g.clone(l);m=this.buildPayload(m,j,i)}}}}if(n==true){if(this.currentItem!=null){g.mixin(m,j)}else{this.alfLog("warn","A request was made to mix the 'currentItem' into the publish payload, but no 'currentItem' has been defined",this)}}return m},buildPayload:function e(n,j,h){if(n!=null){for(var i in n){var m=n[i];if(b.isObject(m)&&m.alfType!==undefined&&m.alfProperty!==undefined){var k=m.alfType;var l=m.alfProperty;if(k=="item"&&j){m=g.getObject(l,null,j)}else{if(k=="payload"&&h){m=g.getObject(l,null,h)}else{this.alfLog("warn","A payload was defined with 'alfType' and 'alfProperty' attributes but the 'alfType' attribute was neither 'item' nor 'payload' (which are the only supported types), or the target object was null",this)}}n[i]=m;delete m.alfType;delete m.alfProperty}}}return n}})});