define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/SlideOverlay.html","alfresco/core/Core","alfresco/core/CoreWidgetProcessing","dojo/_base/lang","dojo/_base/array","dojo/on","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/fx","dojo/_base/fx"],function(p,c,l,q,h,i,s,d,g,n,f,j,k,a){return p([c,l,h,i],{cssRequirements:[{cssFile:"./css/SlideOverlay.css"}],templateString:q,showTopics:null,hideTopics:null,showEvents:null,hideEvents:null,adjustHeightTopics:null,adjustHeightEvents:null,postCreate:function m(){d.forEach(this.showTopics,function(w,x){this.alfSubscribe(w,s.hitch(this,"showOverlay"))},this);d.forEach(this.hideTopics,function(w,x){this.alfSubscribe(w,s.hitch(this,"hideOverlay"))},this);d.forEach(this.showEvents,function(w){g(this.domNode,w,s.hitch(this,"showOverlay"))},this);d.forEach(this.hideEvents,function(w){g(this.domNode,w,s.hitch(this,"hideOverlay"))},this);d.forEach(this.adjustHeightTopics,function(w,x){this.alfSubscribe(w,s.hitch(this,"adjustHeight"))},this);d.forEach(this.adjustHeightEvents,function(w){g(this.domNode,w,s.hitch(this,"adjustHeight"))},this);if(this.widgets){this.processWidgets(this.widgets)}if(typeof MutationObserver==="function"){var v=this;var t=new MutationObserver(s.hitch(this,"adjustHeight")),u={attributes:true,childList:true,characterData:true,subtree:true};t.observe(this.overlayNode,u);t.observe(this.underlayNode,u)}},processWidget:function e(t,w,u){if(this.filterWidget(w)){var v=null;if(w.align=="overlay"){v=this.createWidgetDomNode(w,this.overlayNode,w.className)}else{v=this.createWidgetDomNode(w,this.underlayNode,w.className)}this.createWidget(w,v,this._registerProcessedWidget,this)}},overlayHidden:true,showOverlay:function r(){f.remove(this.overlayNode,"hide");this.overlayHidden=false},adjustHeight:function o(){var u=n.getMarginBox(this.overlayNode),v=n.getMarginBox(this.underlayNode);var t=(u.h>v.h)?u.h:v.h;a.animateProperty({node:this.domNode,properties:{height:t}}).play()},hideOverlay:function b(){f.add(this.overlayNode,"hide");this.overlayHidden=true}})});