define(["dojo/_base/declare","dijit/form/FilteringSelect","alfresco/core/Core","dojo/store/JsonRest","dojo/text!./templates/UserItem.html","dojo/_base/lang","dojo/_base/array","dojo/string","dojo/dom-class","alfresco/users/SingleUserSelectMenu","service/constants/Default"],function(i,d,c,e,n,b,l,m,p,h,f){return i([d,c],{cssRequirements:[{cssFile:"./css/SingleUserSelect.css"}],dropDownClass:h,searchAttr:"filter",postMixInProperties:function j(){if(this.store==null){this.store=new e({target:this.getRestUrl()})}this.inherited(arguments)},getRestUrl:function g(){return f.PROXY_URI+"api/people"},postCreate:function q(){p.add(this.domNode,"alfresco-users-SingleUserSelect");this.inherited(arguments)},labelFunc:function(s,r){return s.firstName+" "+s.lastName},_getMenuLabelFromItem:function a(s){var r=this.inherited(arguments);r.html=true;var t=m.substitute(n,{avatarUrl:(s.avatar?f.PROXY_URI+s.avatar:f.URL_RESCONTEXT+"components/images/no-user-photo-64.png"),name:r.label,email:s.email});r.label=t;return r},_openResultList:function k(t,u,s){var r=t.people;l.forEach(r,b.hitch(this,"generateFilterAttr"));this.inherited(arguments,[r,u,s])},generateFilterAttr:function o(s,r){s.filter=s.firstName+" "+s.lastName}})});