define(["dojo/_base/declare","alfresco/documentlibrary/views/layouts/Row","dojo/text!./templates/AlfSearchResult.html","alfresco/renderers/SearchThumbnail","alfresco/renderers/SearchResultPropertyLink","alfresco/renderers/PropertyLink","alfresco/renderers/Property","alfresco/renderers/DateLink","alfresco/renderers/XhrActions","dojo/_base/lang","dojo/dom-class","alfresco/renderers/XhrContextActions","alfresco/renderers/Size"],function(f,a,m,g,b,n,i,d,l,c,k,h,e){return f([a],{cssRequirements:[{cssFile:"./css/AlfSearchResult.css"}],templateString:m,postCreate:function j(){var p=["document-download","document-view-content","document-view-details","folder-view-details","document-edit-metadata","document-inline-edit","document-manage-granular-permissions","document-manage-repo-permissions","document-view-original","document-view-working-copy","folder-manage-rules","view-in-explorer","document-view-googledoc","document-view-googlemaps","document-view-in-source-repository","document-view-in-cloud","document-delete","document-edit-offline"];var o=["document-delete"];new g({currentItem:this.currentItem,pubSubScope:this.pubSubScope,showDocumentPreview:false,publishTopic:"ALF_NAVIGATE_TO_PAGE"},this.thumbnailNode);new b({currentItem:this.currentItem,pubSubScope:this.pubSubScope,propertyToRender:"displayName",renderSize:"large"},this.nameNode);if(this.currentItem.title==null||this.currentItem.title==""){k.add(this.titleNode,"hidden")}else{new i({currentItem:this.currentItem,pubSubScope:this.pubSubScope,propertyToRender:"title",renderSize:"small",renderedValuePrefix:"(",renderedValueSuffix:")"},this.titleNode)}new d({renderedValueClass:"alfresco-renderers-Property pointer",renderSize:"small",pubSubScope:this.pubSubScope,currentItem:this.currentItem,modifiedDateProperty:"modifiedOn",modifiedByProperty:"modifiedBy",publishTopic:"ALF_NAVIGATE_TO_PAGE",useCurrentItemAsPayload:false,publishPayloadType:"PROCESS",publishPayloadModifiers:["processCurrentItemTokens"],publishPayload:{url:"user/{modifiedByUser}/profile",type:"SHARE_PAGE_RELATIVE"}},this.dateNode);if(this.currentItem.description==null||this.currentItem.description==""){k.add(this.descriptionRow,"hidden")}else{new i({currentItem:this.currentItem,pubSubScope:this.pubSubScope,propertyToRender:"description",renderSize:"small"},this.descriptionNode)}var q=c.getObject("site.title",false,this.currentItem),r=true;if(q==null||q==""){k.add(this.siteRow,"hidden")}else{r=false;new n({renderedValueClass:"alfresco-renderers-Property pointer",renderSize:"small",pubSubScope:this.pubSubScope,currentItem:this.currentItem,propertyToRender:"site.title",label:this.message("faceted-search.doc-lib.value-prefix.site"),publishTopic:"ALF_NAVIGATE_TO_PAGE",useCurrentItemAsPayload:false,publishPayloadType:"PROCESS",publishPayloadModifiers:["processCurrentItemTokens"],publishPayload:{url:"site/{site.shortName}/dashboard",type:"SHARE_PAGE_RELATIVE"}},this.siteNode)}if(this.currentItem.path==null||this.currentItem.path==""){k.add(this.pathRow,"hidden")}else{this.currentItem.pathLink=r?encodeURIComponent("/"+this.currentItem.path.split("/").slice(2).join("/")):encodeURIComponent("/"+this.currentItem.path);new n({renderedValueClass:"alfresco-renderers-Property pointer",pubSubScope:this.pubSubScope,currentItem:this.currentItem,propertyToRender:"path",renderSize:"small",label:this.message("faceted-search.doc-lib.value-prefix.path"),publishTopic:"ALF_NAVIGATE_TO_PAGE",useCurrentItemAsPayload:false,publishPayloadType:"PROCESS",publishPayloadModifiers:["processCurrentItemTokens"],publishPayload:{url:r?"repository?path={pathLink}":"site/{site.shortName}/documentlibrary?path={pathLink}",type:"SHARE_PAGE_RELATIVE"}},this.pathNode)}if(this.currentItem.size==null||this.currentItem.size==""||this.currentItem.size<1){k.add(this.sizeRow,"hidden")}else{new e({currentItem:this.currentItem,pubSubScope:this.pubSubScope,label:this.message("faceted-search.doc-lib.value-prefix.size"),renderSize:"small",sizeProperty:"size"},this.sizeNode)}new l({onlyShowOnHover:true,currentItem:this.currentItem,pubSubScope:this.pubSubScope,filterActions:true,allowedActions:(this.currentItem.type==="document"||this.currentItem.type==="folder")?p:o},this.actionsNode)}})});