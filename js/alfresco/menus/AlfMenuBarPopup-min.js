define(["dojo/_base/declare","dijit/PopupMenuBarItem","alfresco/core/Core","alfresco/core/CoreWidgetProcessing","alfresco/core/CoreRwd","alfresco/menus/_AlfPopupCloseMixin","dojo/dom-construct","dojo/dom-class","alfresco/menus/AlfMenuGroups","service/constants/Default"],function(e,h,b,a,f,i,d,k,l,c){return e([h,b,a,f,i],{i18nScope:"org.alfresco.Menus",cssRequirements:[{cssFile:"./css/AlfMenuBarPopup.css"}],showArrow:true,iconAltText:"",iconSrc:"",labelWithIconClass:"alf-menu-bar-popup-label-node",postMixInProperties:function j(){if(this.label){this.label=this.encodeHTML(this.message(this.label))}this.inherited(arguments)},postCreate:function g(){if(this.iconClass&&this.iconClass!="dijitNoIcon"){this.iconNode=d.create("img",{className:this.iconClass,src:c.URL_RESCONTEXT+(this.iconSrc?this.iconSrc:"js/alfresco/menus/css/images/transparent-20.png"),alt:this.message(this.iconAltText)},this.focusNode,"first");if(this.label){k.add(this.containerNode,this.labelWithIconClass)}}if(this.showArrow){d.create("span",{className:"alf-menu-arrow",innerHTML:"&#9662;"},this.focusNode)}this.inherited(arguments);this.createWidget({name:"alfresco/menus/AlfMenuGroups",assignTo:"popup",config:{widgets:this.widgets}});this.registerPopupCloseEvent()}})});